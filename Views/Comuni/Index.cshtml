@model ComuneListViewModel          // serve a rendere fortemente tipizzata la view
<div class="row">
    <div class="col-md-8">
        <h1>Elenco comuni</h1>
    </div>
    <div class="col-md-4 d-flex align-items-center">
        <form asp-controller="Comuni" asp-action="Index" method="get">
            <div class="input-group">
                <input type="text" name="search" placeholder="Cerca comune" value="@Model.Input.Search">
                <div class="input-group-append"><button class="input-group-text" id="search-button"><i class="fas fa-search"></i></button></div>
            </div>
        </form>
    </div>
</div>
<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-2"><a asp-controller="Comuni" asp-action="Index" asp-route-orderby="nomeComune" asp-route-ascending="@(Model.Input.OrderBy == "nomeComune" ? !Model.Input.Ascending : true)" asp-route-search="@Model.Input.Search">Comune</a> @if(Model.Input.OrderBy == "nomeComune") {<i class="fas fa-caret-@(Model.Input.Ascending ? "up" : "down")"></i>}</div>
    <div class="col-md-5"><a asp-controller="Comuni" asp-action="Index" asp-route-orderby="abitanti" asp-route-ascending="@(Model.Input.OrderBy == "abitanti" ? !Model.Input.Ascending : false)" asp-route-search="@Model.Input.Search">Abitanti</a> @if(Model.Input.OrderBy == "abitanti") {<i class="fas fa-caret-@(Model.Input.Ascending ? "up" : "down")"></i>}</div>
    <div class="col-md-4"></div>
</div>
<hr />
@foreach (ComuneViewModel comune in Model.Comuni)
{
    <div class="row">
        <div class="col-md-1">
            <a href="#"><img src="~/Italia/@(comune.regione.ripartizioneGeografica).jpg" width="50" title="@comune.regione.ripartizioneGeografica"></a>
        </div>
        <div class="col-md-4">
            <h2><a asp-action="Dettaglio" asp-route-id="@comune.codiceCatastale">@comune.nomeComune</a></h2>
            <abitanti>Abitanti: @comune.abitanti.ToString("#,###,###")</abitanti>
        </div>
        <div class="col-md-3">
            <regione>Regione: <a asp-controller = "Regioni" asp-action="Dettaglio" asp-route-id="@comune.regione.codiceRegione">@comune.regione.nomeRegione</a></regione><br />
            <provincia>Provincia: <a asp-controller = "Province" asp-action="Dettaglio" asp-route-id="@comune.provincia.codiceProvincia">@comune.provincia.nomeProvincia (@comune.provincia.siglaProvincia)</a></provincia>
        </div>
        <div class="col-md-2">
            <cap>CAP: @comune.cap</cap><br />
            <prefisso>Prefisso: @comune.prefisso</prefisso>
        </div>
        <div class="col-md-2">
            <a class="btn btn-outline-primary" asp-action="Dettaglio" asp-route-id="@comune.codiceCatastale">Visualizza</a>
        </div>
    </div>
    <hr />
}
<nav aria-label="Page navigation">
    <ul class="pagination d-flex justify-content-center">
        <li class="page-item active" aria-current="page">
            <a class="page-link" asp-comtroller="Comuni" asp-action="Index" asp-route-page="1">1 <span class="sr-only">(current)</span></a>
        </li>
        <li class="page-item">
            <a class="page-link" asp-comtroller="Comuni" asp-action="Index" asp-route-page="2">2</a>
        </li>
        <li class="page-item">
            <a class="page-link" asp-comtroller="Comuni" asp-action="Index" asp-route-page="3">3</a>
        </li>
    </ul>
</nav>